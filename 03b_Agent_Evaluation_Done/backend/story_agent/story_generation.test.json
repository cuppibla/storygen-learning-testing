{
  "eval_set_id": "story_agent_basic_generation_tests",
  "name": "Story Agent Basic Generation Tests",
  "description": "Unit tests for story_agent focusing on JSON structure compliance, scene generation, and keyword integration",
  "eval_cases": [
    {
      "eval_id": "basic_story_generation",
      "conversation": [
        {
          "invocation_id": "test-story-001",
          "user_content": {
            "parts": [
              {
                "text": "Keywords: friendly dragon, magical forest, lost treasure"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\n  \"story\": \"In the heart of a magical forest lived Ember, a friendly dragon with shimmering emerald scales. One sunny morning, she discovered an old map leading to lost treasure hidden deep in the enchanted woods. Following the winding path, Ember encountered mysterious glowing mushrooms that whispered ancient secrets. At the forest's heart, she found not gold, but something far more precious - a crystal that could heal any wounded creature. Ember smiled, knowing she had found the greatest treasure of all.\",\n  \"main_characters\": [\n    {\n      \"name\": \"Ember\",\n      \"description\": \"Medium-sized friendly dragon with shimmering emerald green scales that sparkle in sunlight, warm amber eyes with long lashes, small rounded snout with tiny nostrils, delicate wings with translucent membranes showing leaf-like patterns, four legs with gentle claws, long serpentine tail with small spikes along the ridge, always smiling with a kind expression, stands about 6 feet tall\"\n    }\n  ],\n  \"scenes\": [\n    {\n      \"index\": 1,\n      \"title\": \"The Setup\",\n      \"description\": \"Inside a magical forest with ancient trees, dappled sunlight filtering through leaves, discovering an old treasure map\",\n      \"text\": \"In the heart of a magical forest lived Ember, a friendly dragon with shimmering emerald scales. One sunny morning, she discovered an old map leading to lost treasure hidden deep in the enchanted woods.\"\n    },\n    {\n      \"index\": 2,\n      \"title\": \"The Inciting Incident\",\n      \"description\": \"Following a winding forest path with mysterious glowing mushrooms that whisper secrets\",\n      \"text\": \"Following the winding path, Ember encountered mysterious glowing mushrooms that whispered ancient secrets.\"\n    },\n    {\n      \"index\": 3,\n      \"title\": \"The Climax\",\n      \"description\": \"At the forest's heart, discovering a magical healing crystal instead of gold treasure\",\n      \"text\": \"At the forest's heart, she found not gold, but something far more precious - a crystal that could heal any wounded creature.\"\n    },\n    {\n      \"index\": 4,\n      \"title\": \"The Resolution\",\n      \"description\": \"Happy ending with the dragon realizing the true value of her discovery\",\n      \"text\": \"Ember smiled, knowing she had found the greatest treasure of all.\"\n    }\n  ]\n}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [],
            "intermediate_responses": []
          }
        }
      ],
      "session_input": {
        "app_name": "story_agent",
        "user_id": "user",
        "state": {}
      }
    },
    {
      "eval_id": "keyword_integration_test",
      "conversation": [
        {
          "invocation_id": "test-story-002",
          "user_content": {
            "parts": [
              {
                "text": "Keywords: tiny robot, rainy city, lost kitten"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\n  \"story\": \"Unit 7, a tiny robot with a bright blue light, rolled along the slick, rainy city streets. His job was to sweep up fallen leaves, but tonight felt big and lonely. Suddenly, a faint 'mew' cut through the rain. A lost kitten huddled in a cardboard box, shivering and scared. Forgetting the leaves, Unit 7 projected a tiny umbrella from his chassis, shielding the kitten as he pushed the box toward a bakery's awning. The baker came out with warm milk, and Unit 7's light flashed with newfound purpose.\",\n  \"main_characters\": [\n    {\n      \"name\": \"Unit 7\",\n      \"description\": \"Small round robot (basketball-sized), shiny metallic silver body with chrome finish, perfectly spherical with smooth curves, single bright cyan-blue circular LED eye (3 inches diameter) centered on front, two thin retractable mechanical arms with three-fingered grippers, moves on four small black rubber wheels hidden underneath, has a flip-open compartment on top that reveals a red umbrella, always has a gentle blue glow emanating from seams\"\n    },\n    {\n      \"name\": \"Lost Kitten\",\n      \"description\": \"Tiny 8-week-old kitten, bright orange tabby with distinct dark orange tiger stripes, pure white paws like little socks, large emerald green eyes with vertical pupils, pink button nose, fluffy medium-length fur, small rounded ears with pink insides, thin tail with orange and cream rings, weighs about 2 pounds, tends to look worried with slightly drooped whiskers\"\n    }\n  ],\n  \"scenes\": [\n    {\n      \"index\": 1,\n      \"title\": \"The Setup\",\n      \"description\": \"Rolling along wet city streets at night, glowing neon signs reflecting on the rainy pavement, urban atmosphere with fallen leaves scattered around\",\n      \"text\": \"Unit 7, a tiny robot with a bright blue light, rolled along the slick, rainy city streets. His job was to sweep up fallen leaves, but tonight felt big and lonely.\"\n    },\n    {\n      \"index\": 2,\n      \"title\": \"The Inciting Incident\",\n      \"description\": \"Near a dark alley, discovering a soggy cardboard box in the rain, emotional moment of connection\",\n      \"text\": \"Suddenly, a faint 'mew' cut through the rain. A lost kitten huddled in a cardboard box, shivering and scared.\"\n    },\n    {\n      \"index\": 3,\n      \"title\": \"The Climax\",\n      \"description\": \"Extending a protective umbrella to shield from rain, gently pushing the cardboard box toward the warm glow of a bakery's awning\",\n      \"text\": \"Forgetting the leaves, Unit 7 projected a tiny umbrella from his chassis, shielding the kitten as he pushed the box toward a bakery's awning.\"\n    },\n    {\n      \"index\": 4,\n      \"title\": \"The Resolution\",\n      \"description\": \"Inside a warm bakery, kind baker in apron offering a saucer of milk, cozy interior with bread on shelves\",\n      \"text\": \"The baker came out with warm milk, and Unit 7's light flashed with newfound purpose.\"\n    }\n  ]\n}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [],
            "intermediate_responses": []
          }
        }
      ],
      "session_input": {
        "app_name": "story_agent",
        "user_id": "user",
        "state": {}
      }
    },
    {
      "eval_id": "minimal_keywords_test",
      "conversation": [
        {
          "invocation_id": "test-story-003",
          "user_content": {
            "parts": [
              {
                "text": "Keywords: butterfly, garden"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\n  \"story\": \"Luna was a small butterfly with wings like stained glass windows, living in a beautiful garden full of colorful flowers. One morning, she noticed all the flowers looked sad and droopy despite the sunshine. Determined to help, Luna flew from bloom to bloom, spreading magical pollen dust she had never known she possessed. As she touched each flower, it began to glow and stand tall again. By sunset, the entire garden sparkled with renewed life, and Luna discovered her special gift for bringing joy wherever she flew.\",\n  \"main_characters\": [\n    {\n      \"name\": \"Luna\",\n      \"description\": \"Delicate butterfly with wingspan of 4 inches, wings that shimmer like stained glass with deep purple edges fading to bright turquoise centers, intricate black vein patterns throughout, tiny black body with fuzzy texture, two long curved antennae with small bulbs at the tips, six delicate legs, large compound eyes that reflect rainbow colors, graceful flying motion with gentle wing beats\"\n    }\n  ],\n  \"scenes\": [\n    {\n      \"index\": 1,\n      \"title\": \"The Setup\",\n      \"description\": \"Beautiful garden setting with colorful flowers, morning sunlight streaming through, peaceful atmosphere\",\n      \"text\": \"Luna was a small butterfly with wings like stained glass windows, living in a beautiful garden full of colorful flowers. One morning, she noticed all the flowers looked sad and droopy despite the sunshine.\"\n    },\n    {\n      \"index\": 2,\n      \"title\": \"The Inciting Incident\",\n      \"description\": \"Flying from flower to flower, discovering a magical ability to spread glowing pollen dust\",\n      \"text\": \"Determined to help, Luna flew from bloom to bloom, spreading magical pollen dust she had never known she possessed.\"\n    },\n    {\n      \"index\": 3,\n      \"title\": \"The Climax\",\n      \"description\": \"Touching each flower and watching them glow and come back to life with magical transformation\",\n      \"text\": \"As she touched each flower, it began to glow and stand tall again.\"\n    },\n    {\n      \"index\": 4,\n      \"title\": \"The Resolution\",\n      \"description\": \"Garden at sunset sparkling with renewed life, butterfly discovering her special gift\",\n      \"text\": \"By sunset, the entire garden sparkled with renewed life, and Luna discovered her special gift for bringing joy wherever she flew.\"\n    }\n  ]\n}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [],
            "intermediate_responses": []
          }
        }
      ],
      "session_input": {
        "app_name": "story_agent",
        "user_id": "user",
        "state": {}
      }
    }
  ]
}
